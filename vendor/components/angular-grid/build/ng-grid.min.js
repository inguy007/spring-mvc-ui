(function(e,t){"use strict";var n=6;var r=4;var i="asc";var s="desc";var o="_ng_field_";var u="_ng_depth_";var a="_ng_hidden_";var f="_ng_column_";var l=/CUSTOM_FILTERS/g;var c=/COL_FIELD/g;var h=/DISPLAY_CELL_TEMPLATE/g;var p=/EDITABLE_CELL_TEMPLATE/g;var d=/<.+>/;e.ngGrid={};e.ngGrid.i18n={};var v=angular.module("ngGrid.services",[]);var m=angular.module("ngGrid.directives",[]);var g=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);var y=function(e,t,r,i){if(e.selectionProvider.selectedItems===undefined){return true}var s=r.which||r.keyCode,o,u=false,a=false,f=e.selectionProvider.lastClickedRow===undefined?1:e.selectionProvider.lastClickedRow.rowIndex,l=e.columns.filter(function(e){return e.visible}),c=e.columns.filter(function(e){return e.pinned});if(e.col){o=l.indexOf(e.col)}if(s!==37&&s!==38&&s!==39&&s!==40&&s!==9&&s!==13){return true}if(e.enableCellSelection){if(s===9){r.preventDefault()}var h=e.showSelectionCheckbox?e.col.index===1:e.col.index===0;var p=e.$index===1||e.$index===0;var d=e.$index===e.renderedColumns.length-1||e.$index===e.renderedColumns.length-2;var v=l.indexOf(e.col)===l.length-1;var m=c.indexOf(e.col)===c.length-1;if(s===37||s===9&&r.shiftKey){var g=0;if(!h){o-=1}if(p){if(h&&s===9&&r.shiftKey){g=i.$canvas.width();o=l.length-1;a=true}else{g=i.$viewport.scrollLeft()-e.col.width}}else if(c.length>0){g=i.$viewport.scrollLeft()-l[o].width}i.$viewport.scrollLeft(g)}else if(s===39||s===9&&!r.shiftKey){if(d){if(v&&s===9&&!r.shiftKey){i.$viewport.scrollLeft(0);o=e.showSelectionCheckbox?1:0;u=true}else{i.$viewport.scrollLeft(i.$viewport.scrollLeft()+e.col.width)}}else if(m){i.$viewport.scrollLeft(0)}if(!v){o+=1}}}var y;if(e.configGroups.length>0){y=i.rowFactory.parsedData.filter(function(e){return!e.isAggRow})}else{y=i.filteredRows}var b=0;if(f!==0&&(s===38||s===13&&r.shiftKey||s===9&&r.shiftKey&&a)){b=-1}else if(f!==y.length-1&&(s===40||s===13&&!r.shiftKey||s===9&&u)){b=1}if(b){var w=y[f+b];if(w.beforeSelectionChange(w,r)){w.continueSelection(r);e.$emit("ngGridEventDigestGridParent");if(e.selectionProvider.lastClickedRow.renderedRowIndex>=e.renderedRows.length-n-2){i.$viewport.scrollTop(i.$viewport.scrollTop()+e.rowHeight)}else if(e.selectionProvider.lastClickedRow.renderedRowIndex<=n+2){i.$viewport.scrollTop(i.$viewport.scrollTop()-e.rowHeight)}}}if(e.enableCellSelection){setTimeout(function(){e.domAccessProvider.focusCellElement(e,e.renderedColumns.indexOf(l[o]))},3)}return false};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length>>>0;var n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0){n+=t}for(;n<t;n++){if(n in this&&this[n]===e){return n}}return-1}}if(!Array.prototype.filter){Array.prototype.filter=function(e){"use strict";var t=Object(this);var n=t.length>>>0;if(typeof e!=="function"){throw new TypeError}var r=[];var i=arguments[1];for(var s=0;s<n;s++){if(s in t){var o=t[s];if(e.call(i,o,s,t)){r.push(o)}}}return r}}g.filter("checkmark",function(){return function(e){return e?"✔":"✘"}});g.filter("ngColumns",function(){return function(e){return e.filter(function(e){return!e.isAggCol})}});angular.module("ngGrid.services").factory("$domUtilityService",["$utilityService",function(e){var n={};var r={};var i=function(){var e=t("<div></div>");e.appendTo("body");e.height(100).width(100).css("position","absolute").css("overflow","scroll");e.append('<div style="height: 400px; width: 400px;"></div>');n.ScrollH=e.height()-e[0].clientHeight;n.ScrollW=e.width()-e[0].clientWidth;e.empty();e.attr("style","");e.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>');n.LetterW=e.children().first().width();e.remove()};n.eventStorage={};n.AssignGridContainers=function(e,r,i){i.$root=t(r);i.$topPanel=i.$root.find(".ngTopPanel");i.$groupPanel=i.$root.find(".ngGroupPanel");i.$headerContainer=i.$topPanel.find(".ngHeaderContainer");e.$headerContainer=i.$headerContainer;i.$headerScroller=i.$topPanel.find(".ngHeaderScroller");i.$headers=i.$headerScroller.children();i.$viewport=i.$root.find(".ngViewport");i.$canvas=i.$viewport.find(".ngCanvas");i.$footerPanel=i.$root.find(".ngFooterPanel");e.$watch(function(){return i.$viewport.scrollLeft()},function(e){return i.$headerContainer.scrollLeft(e)});n.UpdateGridLayout(e,i)};n.getRealWidth=function(e){var n=0;var r={visibility:"hidden",display:"block"};var i=e.parents().andSelf().not(":visible");t.swap(i[0],r,function(){n=e.outerWidth()});return n};n.UpdateGridLayout=function(e,t){var r=t.$viewport.scrollTop();t.elementDims.rootMaxW=t.$root.width();if(t.$root.is(":hidden")){t.elementDims.rootMaxW=n.getRealWidth(t.$root)}t.elementDims.rootMaxH=t.$root.height();t.refreshDomSizes();e.adjustScrollTop(r,true)};n.numberOfGrids=0;n.BuildStyles=function(r,i,s){var o=i.config.rowHeight,u=i.$styleSheet,a=i.gridId,f,l=r.columns,c=0;if(!u){u=t("#"+a);if(!u[0]){u=t("<style id='"+a+"' type='text/css' rel='stylesheet' />").appendTo(i.$root)}}u.empty();var h=r.totalRowWidth();f="."+a+" .ngCanvas { width: "+h+"px; }"+"."+a+" .ngRow { width: "+h+"px; }"+"."+a+" .ngCanvas { width: "+h+"px; }"+"."+a+" .ngHeaderScroller { width: "+(h+n.ScrollH)+"px}";for(var p=0;p<l.length;p++){var d=l[p];if(d.visible!==false){f+="."+a+" .col"+p+" { width: "+d.width+"px; left: "+c+"px; height: "+o+"px }"+"."+a+" .colt"+p+" { width: "+d.width+"px; }";c+=d.width}}if(e.isIe){u[0].styleSheet.cssText=f}else{u[0].appendChild(document.createTextNode(f))}i.$styleSheet=u;r.adjustScrollLeft(i.$viewport.scrollLeft());if(s){n.digest(r)}};n.setColLeft=function(t,n,i){if(i.$styleSheet){var s=r[t.index];if(!s){s=r[t.index]=new RegExp(".col"+t.index+" { width: [0-9]+px; left: [0-9]+px")}var o=i.$styleSheet.html();var u=o.replace(s,".col"+t.index+" { width: "+t.width+"px; left: "+n+"px");if(e.isIe){setTimeout(function(){i.$styleSheet.html(u)})}else{i.$styleSheet.html(u)}}};n.setColLeft.immediate=1;n.RebuildGrid=function(e,t){n.UpdateGridLayout(e,t);if(t.config.maintainColumnRatios==null||t.config.maintainColumnRatios){t.configureColumnWidths()}e.adjustScrollLeft(t.$viewport.scrollLeft());n.BuildStyles(e,t,true)};n.digest=function(e){if(!e.$root.$$phase){e.$digest()}};n.ScrollH=17;n.ScrollW=17;n.LetterW=10;i();return n}]);angular.module("ngGrid.services").factory("$sortService",["$parse",function(e){var t={};t.colSortFnCache={};t.guessSortFn=function(e){var n=typeof e;switch(n){case"number":return t.sortNumber;case"boolean":return t.sortBool;case"string":return e.match(/^[-+]?[£$¤]?[\d,.]+%?$/)?t.sortNumberStr:t.sortAlpha;default:if(Object.prototype.toString.call(e)==="[object Date]"){return t.sortDate}else{return t.basicSort}}};t.basicSort=function(e,t){if(e===t){return 0}if(e<t){return-1}return 1};t.sortNumber=function(e,t){return e-t};t.sortNumberStr=function(e,t){var n,r,i=false,s=false;n=parseFloat(e.replace(/[^0-9.-]/g,""));if(isNaN(n)){i=true}r=parseFloat(t.replace(/[^0-9.-]/g,""));if(isNaN(r)){s=true}if(i&&s){return 0}if(i){return 1}if(s){return-1}return n-r};t.sortAlpha=function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n===r?0:n<r?-1:1};t.sortDate=function(e,t){var n=e.getTime(),r=t.getTime();return n===r?0:n<r?-1:1};t.sortBool=function(e,t){if(e&&t){return 0}if(!e&&!t){return 0}else{return e?1:-1}};t.sortData=function(n,r){if(!r||!n){return}var s=n.fields.length,o=n.fields,u,a,f=r.slice(0);r.sort(function(r,l){var c=0,h=0,p;while(c===0&&h<s){u=n.columns[h];a=n.directions[h];p=t.getSortFn(u,f);var d=e(o[h])(r);var v=e(o[h])(l);if(!d&&d!==0||!v&&v!==0){if(!v&&!d){c=0}else if(!d){c=1}else if(!v){c=-1}}else{c=p(d,v)}h++}if(a===i){return c}else{return 0-c}})};t.Sort=function(e,n){if(t.isSorting){return}t.isSorting=true;t.sortData(e,n);t.isSorting=false};t.getSortFn=function(n,r){var i,s;if(t.colSortFnCache[n.field]){i=t.colSortFnCache[n.field]}else if(n.sortingAlgorithm!==undefined){i=n.sortingAlgorithm;t.colSortFnCache[n.field]=n.sortingAlgorithm}else{s=r[0];if(!s){return i}i=t.guessSortFn(e(n.field)(s));if(i){t.colSortFnCache[n.field]=i}else{i=t.sortAlpha}}return i};return t}]);angular.module("ngGrid.services").factory("$utilityService",["$parse",function(n){var r=/function (.{1,})\(/;var i={visualLength:function(e){var n=document.getElementById("testDataLength");if(!n){n=document.createElement("SPAN");n.id="testDataLength";n.style.visibility="hidden";document.body.appendChild(n)}t(n).css("font",t(e).css("font"));t(n).css("font-size",t(e).css("font-size"));t(n).css("font-family",t(e).css("font-family"));n.innerHTML=t(e).text();return n.offsetWidth},forIn:function(e,t){for(var n in e){if(e.hasOwnProperty(n)){t(e[n],n)}}},evalProperty:function(e,t){return n(t)(e)},endsWith:function(e,t){if(!e||!t||typeof e!=="string"){return false}return e.indexOf(t,e.length-t.length)!==-1},isNullOrUndefined:function(e){if(e===undefined||e===null){return true}return false},getElementsByClassName:function(e){var t=[];var n=new RegExp("\\b"+e+"\\b");var r=document.getElementsByTagName("*");for(var i=0;i<r.length;i++){var s=r[i].className;if(n.test(s)){t.push(r[i])}}return t},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),seti18n:function(t,n){var r=e.ngGrid.i18n[n];for(var i in r){t.i18n[i]=r[i]}},getInstanceType:function(e){var t=r.exec(e.constructor.toString());if(t&&t.length>1){var n=t[1].replace(/^\s+|\s+$/g,"");return n}else{return""}},ieVersion:function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->"}while(n[0]);return e>4?e:undefined}()};t.extend(i,{isIe:function(){return i.ieVersion!==undefined}()});return i}]);var b=function(e,t,n,r){this.rowIndex=0;this.offsetTop=this.rowIndex*n;this.entity=e;this.label=e.gLabel;this.field=e.gField;this.depth=e.gDepth;this.parent=e.parent;this.children=e.children;this.aggChildren=e.aggChildren;this.aggIndex=e.aggIndex;this.collapsed=r;this.groupInitState=r;this.rowFactory=t;this.rowHeight=n;this.isAggRow=true;this.offsetLeft=e.gDepth*25;this.aggLabelFilter=e.aggLabelFilter};b.prototype.toggleExpand=function(){this.collapsed=this.collapsed?false:true;if(this.orig){this.orig.collapsed=this.collapsed}this.notifyChildren()};b.prototype.setExpand=function(e){this.collapsed=e;this.notifyChildren()};b.prototype.notifyChildren=function(){var e=Math.max(this.rowFactory.aggCache.length,this.children.length);for(var t=0;t<e;t++){if(this.aggChildren[t]){this.aggChildren[t].entity[a]=this.collapsed;if(this.collapsed){this.aggChildren[t].setExpand(this.collapsed)}}if(this.children[t]){this.children[t][a]=this.collapsed}if(t>this.aggIndex&&this.rowFactory.aggCache[t]){var n=this.rowFactory.aggCache[t];var r=30*this.children.length;n.offsetTop=this.collapsed?n.offsetTop-r:n.offsetTop+r}}this.rowFactory.renderedChange()};b.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"};b.prototype.totalChildren=function(){if(this.aggChildren.length>0){var e=0;var t=function(n){if(n.aggChildren.length>0){angular.forEach(n.aggChildren,function(e){t(e)})}else{e+=n.children.length}};t(this);return e}else{return this.children.length}};b.prototype.copy=function(){var e=new b(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);e.orig=this;return e};var w=function(e,n,r,o,u,a){var f=this,c=e.colDef,h=500,p=0,v=null;f.colDef=e.colDef;f.width=c.width;f.groupIndex=0;f.isGroupedBy=false;f.minWidth=!c.minWidth?50:c.minWidth;f.maxWidth=!c.maxWidth?9e3:c.maxWidth;f.enableCellEdit=c.enableCellEdit!==undefined?c.enableCellEdit:e.enableCellEdit||e.enableCellEditOnFocus;f.headerRowHeight=e.headerRowHeight;f.displayName=c.displayName===undefined?c.field:c.displayName;f.index=e.index;f.isAggCol=e.isAggCol;f.cellClass=c.cellClass;f.sortPriority=undefined;f.cellFilter=c.cellFilter?c.cellFilter:"";f.field=c.field;f.aggLabelFilter=c.cellFilter||c.aggLabelFilter;f.visible=a.isNullOrUndefined(c.visible)||c.visible;f.sortable=false;f.resizable=false;f.pinnable=false;f.pinned=e.enablePinning&&c.pinned;f.originalIndex=e.originalIndex==null?f.index:e.originalIndex;f.groupable=a.isNullOrUndefined(c.groupable)||c.groupable;if(e.enableSort){f.sortable=a.isNullOrUndefined(c.sortable)||c.sortable}if(e.enableResize){f.resizable=a.isNullOrUndefined(c.resizable)||c.resizable}if(e.enablePinning){f.pinnable=a.isNullOrUndefined(c.pinnable)||c.pinnable}f.sortDirection=undefined;f.sortingAlgorithm=c.sortFn;f.headerClass=c.headerClass;f.cursor=f.sortable?"pointer":"default";f.headerCellTemplate=c.headerCellTemplate||u.get("headerCellTemplate.html");f.cellTemplate=c.cellTemplate||u.get("cellTemplate.html").replace(l,f.cellFilter?"|"+f.cellFilter:"");if(f.enableCellEdit){f.cellEditTemplate=u.get("cellEditTemplate.html");f.editableCellTemplate=c.editableCellTemplate||u.get("editableCellTemplate.html")}if(c.cellTemplate&&!d.test(c.cellTemplate)){f.cellTemplate=t.ajax({type:"GET",url:c.cellTemplate,async:false}).responseText}if(f.enableCellEdit&&c.editableCellTemplate&&!d.test(c.editableCellTemplate)){f.editableCellTemplate=t.ajax({type:"GET",url:c.editableCellTemplate,async:false}).responseText}if(c.headerCellTemplate&&!d.test(c.headerCellTemplate)){f.headerCellTemplate=t.ajax({type:"GET",url:c.headerCellTemplate,async:false}).responseText}f.colIndex=function(){var e=f.pinned?"pinned ":"";e+="col"+f.index+" colt"+f.index;if(f.cellClass){e+=" "+f.cellClass}return e};f.groupedByClass=function(){return f.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"};f.toggleVisible=function(){f.visible=!f.visible};f.showSortButtonUp=function(){return f.sortable?f.sortDirection===s:f.sortable};f.showSortButtonDown=function(){return f.sortable?f.sortDirection===i:f.sortable};f.noSortVisible=function(){return!f.sortDirection};f.sort=function(t){if(!f.sortable){return true}var n=f.sortDirection===i?s:i;f.sortDirection=n;e.sortCallback(f,t);return false};f.gripClick=function(){p++;if(p===1){v=setTimeout(function(){p=0},h)}else{clearTimeout(v);e.resizeOnDataCallback(f);p=0}};f.gripOnMouseDown=function(e){n.isColumnResizing=true;if(e.ctrlKey&&!f.pinned){f.toggleVisible();o.BuildStyles(n,r);return true}e.target.parentElement.style.cursor="col-resize";f.startMousePosition=e.clientX;f.origWidth=f.width;t(document).mousemove(f.onMouseMove);t(document).mouseup(f.gripOnMouseUp);return false};f.onMouseMove=function(e){var t=e.clientX-f.startMousePosition;var i=t+f.origWidth;f.width=i<f.minWidth?f.minWidth:i>f.maxWidth?f.maxWidth:i;n.hasUserChangedGridColumnWidths=true;o.BuildStyles(n,r);return false};f.gripOnMouseUp=function(e){t(document).off("mousemove",f.onMouseMove);t(document).off("mouseup",f.gripOnMouseUp);e.target.parentElement.style.cursor="default";o.digest(n);n.isColumnResizing=false;return false};f.copy=function(){var t=new w(e,n,r,o,u);t.isClone=true;t.orig=f;return t};f.setVars=function(e){f.orig=e;f.width=e.width;f.groupIndex=e.groupIndex;f.isGroupedBy=e.isGroupedBy;f.displayName=e.displayName;f.index=e.index;f.isAggCol=e.isAggCol;f.cellClass=e.cellClass;f.cellFilter=e.cellFilter;f.field=e.field;f.aggLabelFilter=e.aggLabelFilter;f.visible=e.visible;f.sortable=e.sortable;f.resizable=e.resizable;f.pinnable=e.pinnable;f.pinned=e.pinned;f.originalIndex=e.originalIndex;f.sortDirection=e.sortDirection;f.sortingAlgorithm=e.sortingAlgorithm;f.headerClass=e.headerClass;f.headerCellTemplate=e.headerCellTemplate;f.cellTemplate=e.cellTemplate;f.cellEditTemplate=e.cellEditTemplate}};var E=function(e){this.outerHeight=null;this.outerWidth=null;t.extend(this,e)};var S=function(e){this.previousColumn=null;this.grid=e};S.prototype.changeUserSelect=function(e,t){e.css({"-webkit-touch-callout":t,"-webkit-user-select":t,"-khtml-user-select":t,"-moz-user-select":t==="none"?"-moz-none":t,"-ms-user-select":t,"user-select":t})};S.prototype.focusCellElement=function(e,t){if(e.selectionProvider.lastClickedRow){var n=t!==undefined?t:this.previousColumn;var r=e.selectionProvider.lastClickedRow.clone?e.selectionProvider.lastClickedRow.clone.elm:e.selectionProvider.lastClickedRow.elm;if(n!==undefined&&r){var i=angular.element(r[0].children).filter(function(){return this.nodeType!==8});var s=Math.max(Math.min(e.renderedColumns.length-1,n),0);if(this.grid.config.showSelectionCheckbox&&angular.element(i[s]).scope()&&angular.element(i[s]).scope().col.index===0){s=1}if(i[s]){i[s].children[1].children[0].focus()}this.previousColumn=n}}};S.prototype.selectionHandlers=function(e,t){var n=false;var r=this;t.bind("keydown",function(i){if(i.keyCode===16){r.changeUserSelect(t,"none",i);return true}else if(!n){n=true;var s=y(e,t,i,r.grid);n=false;return s}return true});t.bind("keyup",function(e){if(e.keyCode===16){r.changeUserSelect(t,"text",e)}return true})};var x=function(n,r,i,s){var o=this;o.colToMove=undefined;o.groupToMove=undefined;o.assignEvents=function(){if(n.config.jqueryUIDraggable&&!n.config.enablePinning){n.$groupPanel.droppable({addClasses:false,drop:function(e){o.onGroupDrop(e)}})}else{n.$groupPanel.on("mousedown",o.onGroupMouseDown).on("dragover",o.dragOver).on("drop",o.onGroupDrop);n.$headerScroller.on("mousedown",o.onHeaderMouseDown).on("dragover",o.dragOver);if(n.config.enableColumnReordering&&!n.config.enablePinning){n.$headerScroller.on("drop",o.onHeaderDrop)}}r.$watch("renderedColumns",function(){s(o.setDraggables)})};o.dragStart=function(e){e.dataTransfer.setData("text","")};o.dragOver=function(e){e.preventDefault()};o.setDraggables=function(){if(!n.config.jqueryUIDraggable){var e=n.$root.find(".ngHeaderSortColumn");angular.forEach(e,function(e){if(e.className&&e.className.indexOf("ngHeaderSortColumn")!==-1){e.setAttribute("draggable","true");if(e.addEventListener){e.addEventListener("dragstart",o.dragStart)}}});if(navigator.userAgent.indexOf("MSIE")!==-1){n.$root.find(".ngHeaderSortColumn").bind("selectstart",function(){this.dragDrop();return false})}}else{n.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:false,start:function(e){o.onHeaderMouseDown(e)}}).droppable({drop:function(e){o.onHeaderDrop(e)}})}};o.onGroupMouseDown=function(e){var r=t(e.target);if(r[0].className!=="ngRemoveGroup"){var i=angular.element(r).scope();if(i){if(!n.config.jqueryUIDraggable){r.attr("draggable","true");if(this.addEventListener){this.addEventListener("dragstart",o.dragStart)}if(navigator.userAgent.indexOf("MSIE")!==-1){r.bind("selectstart",function(){this.dragDrop();return false})}}o.groupToMove={header:r,groupName:i.group,index:i.$index}}}else{o.groupToMove=undefined}};o.onGroupDrop=function(e){e.stopPropagation();var i;var s;if(o.groupToMove){i=t(e.target).closest(".ngGroupElement");if(i.context.className==="ngGroupPanel"){r.configGroups.splice(o.groupToMove.index,1);r.configGroups.push(o.groupToMove.groupName)}else{s=angular.element(i).scope();if(s){if(o.groupToMove.index!==s.$index){r.configGroups.splice(o.groupToMove.index,1);r.configGroups.splice(s.$index,0,o.groupToMove.groupName)}}}o.groupToMove=undefined;n.fixGroupIndexes()}else if(o.colToMove){if(r.configGroups.indexOf(o.colToMove.col)===-1){i=t(e.target).closest(".ngGroupElement");if(i.context.className==="ngGroupPanel"||i.context.className==="ngGroupPanelDescription ng-binding"){r.groupBy(o.colToMove.col)}else{s=angular.element(i).scope();if(s){r.removeGroup(s.$index)}}}o.colToMove=undefined}if(!r.$$phase){r.$apply()}};o.onHeaderMouseDown=function(e){var n=t(e.target).closest(".ngHeaderSortColumn");var r=angular.element(n).scope();if(r){o.colToMove={header:n,col:r.col}}};o.onHeaderDrop=function(e){if(!o.colToMove||o.colToMove.col.pinned){return}var s=t(e.target).closest(".ngHeaderSortColumn");var u=angular.element(s).scope();if(u){if(o.colToMove.col===u.col){return}r.columns.splice(o.colToMove.col.index,1);r.columns.splice(u.col.index,0,o.colToMove.col);n.fixColumnIndexes();o.colToMove=undefined;i.digest(r)}};o.assignGridEventHandlers=function(){if(n.config.tabIndex===-1){n.$viewport.attr("tabIndex",i.numberOfGrids);i.numberOfGrids++}else{n.$viewport.attr("tabIndex",n.config.tabIndex)}var s;t(e).resize(function(){clearTimeout(s);s=setTimeout(function(){i.RebuildGrid(r,n)},100)});var o;t(n.$root.parent()).on("resize",function(){clearTimeout(o);o=setTimeout(function(){i.RebuildGrid(r,n)},100)})};o.assignGridEventHandlers();o.assignEvents()};var T=function(e,t){e.maxRows=function(){var n=Math.max(e.pagingOptions.totalServerItems,t.data.length);return n};e.multiSelect=t.config.enableRowSelection&&t.config.multiSelect;e.selectedItemCount=t.selectedItemCount;e.maxPages=function(){return Math.ceil(e.maxRows()/e.pagingOptions.pageSize)};e.pageForward=function(){var t=e.pagingOptions.currentPage;if(e.pagingOptions.totalServerItems>0){e.pagingOptions.currentPage=Math.min(t+1,e.maxPages())}else{e.pagingOptions.currentPage++}};e.pageBackward=function(){var t=e.pagingOptions.currentPage;e.pagingOptions.currentPage=Math.max(t-1,1)};e.pageToFirst=function(){e.pagingOptions.currentPage=1};e.pageToLast=function(){var t=e.maxPages();e.pagingOptions.currentPage=t};e.cantPageForward=function(){var n=e.pagingOptions.currentPage;var r=e.maxPages();if(e.pagingOptions.totalServerItems>0){return n>=r}else{return t.data.length<1}};e.cantPageToLast=function(){if(e.pagingOptions.totalServerItems>0){return e.cantPageForward()}else{return true}};e.cantPageBackward=function(){var t=e.pagingOptions.currentPage;return t<=1}};var N=function(i,s,o,u,f,l,c,h,p,v,m){var g={aggregateTemplate:undefined,afterSelectionChange:function(){},beforeSelectionChange:function(){return true},checkboxCellTemplate:undefined,checkboxHeaderTemplate:undefined,columnDefs:undefined,data:[],dataUpdated:function(){},enableCellEdit:false,enableCellEditOnFocus:false,enableCellSelection:false,enableColumnResize:false,enableColumnReordering:false,enableColumnHeavyVirt:false,enablePaging:false,enablePinning:false,enableRowSelection:true,enableSorting:true,enableHighlighting:false,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:false},footerRowHeight:55,footerTemplate:undefined,groups:[],groupsCollapsedByDefault:true,headerRowHeight:30,headerRowTemplate:undefined,jqueryUIDraggable:false,jqueryUITheme:false,keepLastSelected:true,maintainColumnRatios:undefined,menuTemplate:undefined,multiSelect:true,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:false,plugins:[],primaryKey:undefined,rowHeight:30,rowTemplate:undefined,selectedItems:[],selectWithCheckboxOnly:false,showColumnMenu:false,showFilter:false,showFooter:false,showGroupPanel:false,showSelectionCheckbox:false,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:false,i18n:"en",virtualizationThreshold:50},y=this;y.maxCanvasHt=0;y.config=t.extend(g,e.ngGrid.config,s);y.config.showSelectionCheckbox=y.config.showSelectionCheckbox&&y.config.enableColumnHeavyVirt===false;y.config.enablePinning=y.config.enablePinning&&y.config.enableColumnHeavyVirt===false;y.config.selectWithCheckboxOnly=y.config.selectWithCheckboxOnly&&y.config.showSelectionCheckbox!==false;y.config.pinSelectionCheckbox=y.config.enablePinning;if(typeof s.columnDefs==="string"){y.config.columnDefs=i.$eval(s.columnDefs)}y.rowCache=[];y.rowMap=[];y.gridId="ng"+c.newId();y.$root=null;y.$groupPanel=null;y.$topPanel=null;y.$headerContainer=null;y.$headerScroller=null;y.$headers=null;y.$viewport=null;y.$canvas=null;y.rootDim=y.config.gridDim;y.data=[];y.lateBindColumns=false;y.filteredRows=[];y.initTemplates=function(){var e=["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"];var t=[];angular.forEach(e,function(e){t.push(y.getTemplate(e))});return m.all(t)};y.getTemplate=function(e){var t=y.config[e];var n=y.gridId+e+".html";var r=m.defer();if(t&&!d.test(t)){v.get(t,{cache:l}).success(function(e){l.put(n,e);r.resolve()}).error(function(e){r.reject("Could not load template: "+t)})}else if(t){l.put(n,t);r.resolve()}else{var i=e+".html";l.put(n,l.get(i));r.resolve()}return r.promise};if(typeof y.config.data==="object"){y.data=y.config.data}y.calcMaxCanvasHeight=function(){var e;if(y.config.groups.length>0){e=y.rowFactory.parsedData.filter(function(e){return!e[a]}).length*y.config.rowHeight}else{e=y.filteredRows.length*y.config.rowHeight}return e};y.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0};y.setRenderedRows=function(e){i.renderedRows.length=e.length;for(var t=0;t<e.length;t++){if(!i.renderedRows[t]||e[t].isAggRow||i.renderedRows[t].isAggRow){i.renderedRows[t]=e[t].copy();i.renderedRows[t].collapsed=e[t].collapsed;if(!e[t].isAggRow){i.renderedRows[t].setVars(e[t])}}else{i.renderedRows[t].setVars(e[t])}i.renderedRows[t].rowIndex=e[t].rowIndex;i.renderedRows[t].offsetTop=e[t].offsetTop;i.renderedRows[t].selected=e[t].selected;e[t].renderedRowIndex=t}y.refreshDomSizes();i.$emit("ngGridEventRows",e)};y.minRowsToRender=function(){var e=i.viewportDimHeight()||1;return Math.floor(e/y.config.rowHeight)};y.refreshDomSizes=function(){var e=new E;e.outerWidth=y.elementDims.rootMaxW;e.outerHeight=y.elementDims.rootMaxH;y.rootDim=e;y.maxCanvasHt=y.calcMaxCanvasHeight()};y.buildColumnDefsFromData=function(){y.config.columnDefs=[];var e=y.data[0];if(!e){y.lateBoundColumns=true;return}c.forIn(e,function(e,t){if(y.config.excludeProperties.indexOf(t)===-1){y.config.columnDefs.push({field:t})}})};y.buildColumns=function(){var e=y.config.columnDefs,t=[];if(!e){y.buildColumnDefsFromData();e=y.config.columnDefs}if(y.config.showSelectionCheckbox){t.push(new w({colDef:{field:"✔",width:y.elementDims.rowSelectedCellW,sortable:false,resizable:false,groupable:false,headerCellTemplate:l.get(i.gridId+"checkboxHeaderTemplate.html"),cellTemplate:l.get(i.gridId+"checkboxCellTemplate.html"),pinned:y.config.pinSelectionCheckbox},index:0,headerRowHeight:y.config.headerRowHeight,sortCallback:y.sortData,resizeOnDataCallback:y.resizeOnData,enableResize:y.config.enableColumnResize,enableSort:y.config.enableSorting,enablePinning:y.config.enablePinning},i,y,u,l,c))}if(e.length>0){var n=y.config.showSelectionCheckbox?1:0;var r=i.configGroups.length;i.configGroups.length=0;angular.forEach(e,function(e,s){s+=n;var o=new w({colDef:e,index:s+r,originalIndex:s,headerRowHeight:y.config.headerRowHeight,sortCallback:y.sortData,resizeOnDataCallback:y.resizeOnData,enableResize:y.config.enableColumnResize,enableSort:y.config.enableSorting,enablePinning:y.config.enablePinning,enableCellEdit:y.config.enableCellEdit||y.config.enableCellEditOnFocus},i,y,u,l,c);var a=y.config.groups.indexOf(e.field);if(a!==-1){o.isGroupedBy=true;i.configGroups.splice(a,0,o);o.groupIndex=i.configGroups.length}t.push(o)});i.columns=t;if(y.config.groups.length>0){y.rowFactory.getGrouping(y.config.groups)}}};y.configureColumnWidths=function(){var e=[],t=[],n=0,r=0;var s={};angular.forEach(i.columns,function(e,t){if(!c.isNullOrUndefined(e.originalIndex)){var n=e.originalIndex;if(y.config.showSelectionCheckbox){if(e.originalIndex===0&&e.visible){r+=25}n--}s[n]=t}});angular.forEach(y.config.columnDefs,function(o,u){var a=i.columns[s[u]];o.index=u;var f=false,l;if(c.isNullOrUndefined(o.width)){o.width="*"}else{f=isNaN(o.width)?c.endsWith(o.width,"%"):false;l=f?o.width:parseInt(o.width,10)}if(isNaN(l)&&!i.hasUserChangedGridColumnWidths){l=o.width;if(l==="auto"){a.width=a.minWidth;r+=a.width;var h=a;i.$on("ngGridEventData",function(){y.resizeOnData(h)});return}else if(l.indexOf("*")!==-1){if(a.visible!==false){n+=l.length}e.push(o);return}else if(f){t.push(o);return}else{throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}}else if(a.visible!==false){r+=a.width=parseInt(a.width,10)}});if(t.length>0){y.config.maintainColumnRatios=y.config.maintainColumnRatios!==false;var o=0;var a=0;angular.forEach(t,function(e){var t=i.columns[s[e.index]];var n=e.width;var r=parseInt(n.slice(0,-1),10)/100;o+=r;if(!t.visible){a+=r}});var f=o-a;angular.forEach(t,function(e){var t=i.columns[s[e.index]];var n=e.width;var u=parseInt(n.slice(0,-1),10)/100;if(a>0){u=u/f}else{u=u/o}var l=y.rootDim.outerWidth*o;t.width=Math.floor(l*u);r+=t.width})}if(e.length>0){y.config.maintainColumnRatios=y.config.maintainColumnRatios!==false;var l=y.rootDim.outerWidth-r;if(y.maxCanvasHt>i.viewportDimHeight()){l-=u.ScrollW}var h=Math.floor(l/n);angular.forEach(e,function(t,n){var o=i.columns[s[t.index]];o.width=h*t.width.length;if(o.visible!==false){r+=o.width}var a=n===e.length-1;if(a&&r<y.rootDim.outerWidth){var f=y.rootDim.outerWidth-r;if(y.maxCanvasHt>i.viewportDimHeight()){f-=u.ScrollW}o.width+=f}})}};y.init=function(){return y.initTemplates().then(function(){i.selectionProvider=new O(y,i,p);i.domAccessProvider=new S(y);y.rowFactory=new L(y,i,u,l,c);y.searchProvider=new A(i,y,f);y.styleProvider=new M(i,y);i.$watch("configGroups",function(e){var t=[];angular.forEach(e,function(e){t.push(e.field||e)});y.config.groups=t;y.rowFactory.filteredRowsChanged();i.$emit("ngGridEventGroups",e)},true);i.$watch("columns",function(e){if(!i.isColumnResizing){u.RebuildGrid(i,y)}i.$emit("ngGridEventColumns",e)},true);i.$watch(function(){return s.i18n},function(e){c.seti18n(i,e)});y.maxCanvasHt=y.calcMaxCanvasHeight();if(y.config.sortInfo.fields&&y.config.sortInfo.fields.length>0){i.$watch(function(){return y.config.sortInfo},function(e){if(!o.isSorting){y.sortColumnsInit();i.$emit("ngGridEventSorted",y.config.sortInfo)}},true)}})};y.resizeOnData=function(e){var n=e.minWidth;var r=c.getElementsByClassName("col"+e.index);angular.forEach(r,function(e,r){var i;if(r===0){var s=t(e).find(".ngHeaderText");i=c.visualLength(s)+10}else{var o=t(e).find(".ngCellText");i=c.visualLength(o)+10}if(i>n){n=i}});e.width=e.longest=Math.min(e.maxWidth,n+7);u.BuildStyles(i,y,true)};y.lastSortedColumns=[];y.sortData=function(e,n){if(n&&n.shiftKey&&y.config.sortInfo){var r=y.config.sortInfo.columns.indexOf(e);if(r===-1){if(y.config.sortInfo.columns.length===1){y.config.sortInfo.columns[0].sortPriority=1}y.config.sortInfo.columns.push(e);e.sortPriority=y.config.sortInfo.columns.length;y.config.sortInfo.fields.push(e.field);y.config.sortInfo.directions.push(e.sortDirection);y.lastSortedColumns.push(e)}else{y.config.sortInfo.directions[r]=e.sortDirection}}else{var s=t.isArray(e);y.config.sortInfo.columns.length=0;y.config.sortInfo.fields.length=0;y.config.sortInfo.directions.length=0;var o=function(e){y.config.sortInfo.columns.push(e);y.config.sortInfo.fields.push(e.field);y.config.sortInfo.directions.push(e.sortDirection);y.lastSortedColumns.push(e)};if(s){y.clearSortingData();angular.forEach(e,function(e,t){e.sortPriority=t+1;o(e)})}else{y.clearSortingData(e);e.sortPriority=undefined;o(e)}}y.sortActual();y.searchProvider.evalFilter();i.$emit("ngGridEventSorted",y.config.sortInfo)};y.sortColumnsInit=function(){if(y.config.sortInfo.columns){y.config.sortInfo.columns.length=0}else{y.config.sortInfo.columns=[]}angular.forEach(i.columns,function(e){var t=y.config.sortInfo.fields.indexOf(e.field);if(t!==-1){e.sortDirection=y.config.sortInfo.directions[t]||"asc";y.config.sortInfo.columns[t]=e}});angular.forEach(y.config.sortInfo.columns,function(e){y.sortData(e)})};y.sortActual=function(){if(!y.config.useExternalSorting){var e=y.data.slice(0);angular.forEach(e,function(e,t){var n=y.rowMap[t];if(n!==undefined){var r=y.rowCache[n];if(r!==undefined){e.preSortSelected=r.selected;e.preSortIndex=t}}});o.Sort(y.config.sortInfo,e);angular.forEach(e,function(e,t){y.rowCache[t].entity=e;y.rowCache[t].selected=e.preSortSelected;y.rowMap[e.preSortIndex]=t;delete e.preSortSelected;delete e.preSortIndex})}};y.clearSortingData=function(e){if(!e){angular.forEach(y.lastSortedColumns,function(e){e.sortDirection="";e.sortPriority=null});y.lastSortedColumns=[]}else{angular.forEach(y.lastSortedColumns,function(t){if(e.index!==t.index){t.sortDirection="";t.sortPriority=null}});y.lastSortedColumns[0]=e;y.lastSortedColumns.length=1}};y.fixColumnIndexes=function(){for(var e=0;e<i.columns.length;e++){i.columns[e].index=e}};y.fixGroupIndexes=function(){angular.forEach(i.configGroups,function(e,t){e.groupIndex=t+1})};i.elementsNeedMeasuring=true;i.columns=[];i.renderedRows=[];i.renderedColumns=[];i.headerRow=null;i.rowHeight=y.config.rowHeight;i.jqueryUITheme=y.config.jqueryUITheme;i.showSelectionCheckbox=y.config.showSelectionCheckbox;i.enableCellSelection=y.config.enableCellSelection;i.enableCellEditOnFocus=y.config.enableCellEditOnFocus;i.footer=null;i.selectedItems=y.config.selectedItems;i.multiSelect=y.config.multiSelect;i.showFooter=y.config.showFooter;i.footerRowHeight=i.showFooter?y.config.footerRowHeight:0;i.showColumnMenu=y.config.showColumnMenu;i.showMenu=false;i.configGroups=[];i.gridId=y.gridId;i.enablePaging=y.config.enablePaging;i.pagingOptions=y.config.pagingOptions;i.i18n={};c.seti18n(i,y.config.i18n);i.adjustScrollLeft=function(e){var t=0,n=0,r=i.columns.length,s=[],o=!y.config.enableColumnHeavyVirt;var a=0;var f=function(e){if(o){s.push(e)}else{if(!i.renderedColumns[a]){i.renderedColumns[a]=e.copy()}else{i.renderedColumns[a].setVars(e)}}a++};for(var l=0;l<r;l++){var c=i.columns[l];if(c.visible!==false){var h=c.width+t;if(c.pinned){f(c);var p=l>0?e+n:e;u.setColLeft(c,p,y);n+=c.width}else{if(h>=e){if(t<=e+y.rootDim.outerWidth){f(c)}}}t+=c.width}}if(o){i.renderedColumns=s}};y.prevScrollTop=0;y.prevScrollIndex=0;i.adjustScrollTop=function(e,t){if(y.prevScrollTop===e&&!t){return}if(e>0&&y.$viewport[0].scrollHeight-e<=y.$viewport.outerHeight()){i.$emit("ngGridEventScroll")}var s=Math.floor(e/y.config.rowHeight);var o;if(y.filteredRows.length>y.config.virtualizationThreshold){if(y.prevScrollTop<e&&s<y.prevScrollIndex+r){return}if(y.prevScrollTop>e&&s>y.prevScrollIndex-r){return}o=new C(Math.max(0,s-n),s+y.minRowsToRender()+n)}else{var u=i.configGroups.length>0?y.rowFactory.parsedData.length:y.data.length;o=new C(0,Math.max(u,y.minRowsToRender()+n))}y.prevScrollTop=e;y.rowFactory.UpdateViewableRange(o);y.prevScrollIndex=s};i.toggleShowMenu=function(){i.showMenu=!i.showMenu};i.toggleSelectAll=function(e,t){i.selectionProvider.toggleSelectAll(e,false,t)};i.totalFilteredItemsLength=function(){return y.filteredRows.length};i.showGroupPanel=function(){return y.config.showGroupPanel};i.topPanelHeight=function(){return y.config.showGroupPanel===true?y.config.headerRowHeight+32:y.config.headerRowHeight};i.viewportDimHeight=function(){return Math.max(0,y.rootDim.outerHeight-i.topPanelHeight()-i.footerRowHeight-2)};i.groupBy=function(e){if(y.data.length<1||!e.groupable||!e.field){return}if(!e.sortDirection){e.sort({shiftKey:i.configGroups.length>0?true:false})}var t=i.configGroups.indexOf(e);if(t===-1){e.isGroupedBy=true;i.configGroups.push(e);e.groupIndex=i.configGroups.length}else{i.removeGroup(t)}y.$viewport.scrollTop(0);u.digest(i)};i.removeGroup=function(e){var t=i.columns.filter(function(t){return t.groupIndex===e+1})[0];t.isGroupedBy=false;t.groupIndex=0;if(i.columns[e].isAggCol){i.columns.splice(e,1);i.configGroups.splice(e,1);y.fixGroupIndexes()}if(i.configGroups.length===0){y.fixColumnIndexes();u.digest(i)}i.adjustScrollLeft(0)};i.togglePin=function(e){var t=e.index;var n=0;for(var r=0;r<i.columns.length;r++){if(!i.columns[r].pinned){break}n++}if(e.pinned){n=Math.max(e.originalIndex,n-1)}e.pinned=!e.pinned;i.columns.splice(t,1);i.columns.splice(n,0,e);y.fixColumnIndexes();u.BuildStyles(i,y,true);y.$viewport.scrollLeft(y.$viewport.scrollLeft()-e.width)};i.totalRowWidth=function(){var e=0,t=i.columns;for(var n=0;n<t.length;n++){if(t[n].visible!==false){e+=t[n].width}}return e};i.headerScrollerDim=function(){var e=i.viewportDimHeight(),t=y.maxCanvasHt,n=t>e,r=new E;r.autoFitHeight=true;r.outerWidth=i.totalRowWidth();if(n){r.outerWidth+=y.elementDims.scrollW}else if(t-e<=y.elementDims.scrollH){r.outerWidth+=y.elementDims.scrollW}return r}};var C=function(e,t){this.topRow=e;this.bottomRow=t};var k=function(e,t,n,r,i){this.entity=e;this.config=t;this.selectionProvider=n;this.rowIndex=r;this.utils=i;this.selected=n.getSelection(e);this.cursor=this.config.enableRowSelection?"pointer":"default";this.beforeSelectionChange=t.beforeSelectionChangeCallback;this.afterSelectionChange=t.afterSelectionChangeCallback;this.offsetTop=this.rowIndex*t.rowHeight;this.rowDisplayIndex=0};k.prototype.setSelection=function(e){this.selectionProvider.setSelection(this,e);this.selectionProvider.lastClickedRow=this};k.prototype.continueSelection=function(e){this.selectionProvider.ChangeSelection(this,e)};k.prototype.ensureEntity=function(e){if(this.entity!==e){this.entity=e;this.selected=this.selectionProvider.getSelection(this.entity)}};k.prototype.toggleSelected=function(e){if(!this.config.enableRowSelection&&!this.config.enableCellSelection){return true}var t=e.target||e;if(t.type==="checkbox"&&t.parentElement.className!=="ngSelectionCell ng-scope"){return true}if(this.config.selectWithCheckboxOnly&&t.type!=="checkbox"){this.selectionProvider.lastClickedRow=this;return true}if(this.beforeSelectionChange(this,e)){this.continueSelection(e)}return false};k.prototype.alternatingRowClass=function(){var e=this.rowIndex%2===0;var t={ngRow:true,selected:this.selected,even:e,odd:!e,"ui-state-default":this.config.jqueryUITheme&&e,"ui-state-active":this.config.jqueryUITheme&&!e};return t};k.prototype.getProperty=function(e){return this.utils.evalProperty(this.entity,e)};k.prototype.copy=function(){this.clone=new k(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils);this.clone.isClone=true;this.clone.elm=this.elm;this.clone.orig=this;return this.clone};k.prototype.setVars=function(e){e.clone=this;this.entity=e.entity;this.selected=e.selected;this.orig=e};var L=function(e,t,r,i,s){var l=this;l.aggCache={};l.parentCache=[];l.dataChanged=true;l.parsedData=[];l.rowConfig={};l.selectionProvider=t.selectionProvider;l.rowHeight=30;l.numberOfAggregates=0;l.groupedData=undefined;l.rowHeight=e.config.rowHeight;l.rowConfig={enableRowSelection:e.config.enableRowSelection,rowClasses:e.config.rowClasses,selectedItems:t.selectedItems,selectWithCheckboxOnly:e.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:e.config.beforeSelectionChange,afterSelectionChangeCallback:e.config.afterSelectionChange,jqueryUITheme:e.config.jqueryUITheme,enableCellSelection:e.config.enableCellSelection,rowHeight:e.config.rowHeight};l.renderedRange=new C(0,e.minRowsToRender()+n);l.buildEntityRow=function(e,t){return new k(e,l.rowConfig,l.selectionProvider,t,s)};l.buildAggregateRow=function(t,n){var r=l.aggCache[t.aggIndex];if(!r){r=new b(t,l,l.rowConfig.rowHeight,e.config.groupsCollapsedByDefault);l.aggCache[t.aggIndex]=r}r.rowIndex=n;r.offsetTop=n*l.rowConfig.rowHeight;return r};l.UpdateViewableRange=function(e){l.renderedRange=e;l.renderedChange()};l.filteredRowsChanged=function(){if(e.lateBoundColumns&&e.filteredRows.length>0){e.config.columnDefs=undefined;e.buildColumns();e.lateBoundColumns=false;t.$evalAsync(function(){t.adjustScrollLeft(0)})}l.dataChanged=true;if(e.config.groups.length>0){l.getGrouping(e.config.groups)}l.UpdateViewableRange(l.renderedRange)};l.renderedChange=function(){if(!l.groupedData||e.config.groups.length<1){l.renderedChangeNoGroups();e.refreshDomSizes();return}l.wasGrouped=true;l.parentCache=[];var t=0;var n=l.parsedData.filter(function(e){if(e.isAggRow){if(e.parent&&e.parent.collapsed){return false}return true}if(!e[a]){e.rowIndex=t++}return!e[a]});l.totalRows=n.length;var r=[];for(var i=l.renderedRange.topRow;i<l.renderedRange.bottomRow;i++){if(n[i]){n[i].offsetTop=i*e.config.rowHeight;r.push(n[i])}}e.setRenderedRows(r)};l.renderedChangeNoGroups=function(){var t=[];for(var n=l.renderedRange.topRow;n<l.renderedRange.bottomRow;n++){if(e.filteredRows[n]){e.filteredRows[n].rowIndex=n;e.filteredRows[n].offsetTop=n*e.config.rowHeight;t.push(e.filteredRows[n])}}e.setRenderedRows(t)};l.fixRowCache=function(){var t=e.data.length;var n=t-e.rowCache.length;if(n<0){e.rowCache.length=e.rowMap.length=t}else{for(var r=e.rowCache.length;r<t;r++){e.rowCache[r]=e.rowFactory.buildEntityRow(e.data[r],r)}}};l.parseGroupData=function(e){if(e.values){for(var t=0;t<e.values.length;t++){l.parentCache[l.parentCache.length-1].children.push(e.values[t]);l.parsedData.push(e.values[t])}}else{for(var n in e){if(n===o||n===u||n===f){continue}else if(e.hasOwnProperty(n)){var r=l.buildAggregateRow({gField:e[o],gLabel:n,gDepth:e[u],isAggRow:true,_ng_hidden_:false,children:[],aggChildren:[],aggIndex:l.numberOfAggregates,aggLabelFilter:e[f].aggLabelFilter},0);l.numberOfAggregates++;r.parent=l.parentCache[r.depth-1];if(r.parent){r.parent.collapsed=false;r.parent.aggChildren.push(r)}l.parsedData.push(r);l.parentCache[r.depth]=r;l.parseGroupData(e[n])}}}};l.getGrouping=function(n){function d(e,t){return e.filter(function(e){return e.field===t})}l.aggCache=[];l.numberOfAggregates=0;l.groupedData={};var c=e.filteredRows,h=n.length,p=t.columns;for(var v=0;v<c.length;v++){var m=c[v].entity;if(!m){return}c[v][a]=e.config.groupsCollapsedByDefault;var g=l.groupedData;for(var y=0;y<n.length;y++){var b=n[y];var E=d(p,b)[0];var S=s.evalProperty(m,b);S=S?S.toString():"null";if(!g[S]){g[S]={}}if(!g[o]){g[o]=b}if(!g[u]){g[u]=y}if(!g[f]){g[f]=E}g=g[S]}if(!g.values){g.values=[]}g.values.push(c[v])}if(p.length>0){for(var x=0;x<n.length;x++){if(!p[x].isAggCol&&x<=h){p.splice(0,0,new w({colDef:{field:"",width:25,sortable:false,resizable:false,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:e.config.pinSelectionCheckbox},enablePinning:e.config.enablePinning,isAggCol:true,headerRowHeight:e.config.headerRowHeight},t,e,r,i,s))}}}e.fixColumnIndexes();t.adjustScrollLeft(0);l.parsedData.length=0;l.parseGroupData(l.groupedData);l.fixRowCache()};if(e.config.groups.length>0&&e.filteredRows.length>0){l.getGrouping(e.config.groups)}};var A=function(e,n,r){var i=this,s=[];i.extFilter=n.config.filterOptions.useExternalFilter;e.showFilter=n.config.showFilter;e.filterText="";i.fieldMap={};var o=function(e,t,n){var i;for(var s in t){if(t.hasOwnProperty(s)){var u=n[s.toLowerCase()];if(!u){continue}var a=t[s];if(typeof a==="object"){return o(e,a,u)}else{var f=null,l=null;if(u&&u.cellFilter){l=u.cellFilter.split(":");f=r(l[0])}if(a!==null&&a!==undefined){if(typeof f==="function"){var c=f(a,l[1]).toString();i=e.regex.test(c)}else{i=e.regex.test(a.toString())}if(i){return true}}}}}return false};var u=function(e,t){var n;var s=i.fieldMap[e.columnDisplay];if(!s){return false}var o=s.cellFilter.split(":");var u=s.cellFilter?r(o[0]):null;var a=t[e.column]||t[s.field.split(".")[0]];if(a===null||a===undefined){return false}if(typeof u==="function"){var l=u(typeof a==="object"?f(a,s.field):a,o[1]).toString();n=e.regex.test(l)}else{n=e.regex.test(typeof a==="object"?f(a,s.field).toString():a.toString())}if(n){return true}return false};var a=function(e){for(var t=0,n=s.length;t<n;t++){var r=s[t];var a;if(!r.column){a=o(r,e,i.fieldMap)}else{a=u(r,e)}if(!a){return false}}return true};i.evalFilter=function(){if(s.length===0){n.filteredRows=n.rowCache}else{n.filteredRows=n.rowCache.filter(function(e){return a(e.entity)})}for(var e=0;e<n.filteredRows.length;e++){n.filteredRows[e].rowIndex=e}n.rowFactory.filteredRowsChanged()};var f=function(e,t){if(typeof e!=="object"||typeof t!=="string"){return e}var n=t.split(".");var r=e;if(n.length>1){for(var i=1,s=n.length;i<s;i++){r=r[n[i]];if(!r){return e}}return r}return e};var l=function(e,t){try{return new RegExp(e,t)}catch(n){return new RegExp(e.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}};var c=function(e){s=[];var n;if(!(n=t.trim(e))){return}var r=n.split(";");for(var i=0;i<r.length;i++){var o=r[i].split(":");if(o.length>1){var u=t.trim(o[0]);var a=t.trim(o[1]);if(u&&a){s.push({column:u,columnDisplay:u.replace(/\s+/g,"").toLowerCase(),regex:l(a,"i")})}}else{var f=t.trim(o[0]);if(f){s.push({column:"",regex:l(f,"i")})}}}};if(!i.extFilter){e.$watch("columns",function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.field){if(n.field.match(/\./g)){var r=n.field.split(".");var s=i.fieldMap;for(var o=0;o<r.length-1;o++){s[r[o]]=s[r[o]]||{};s=s[r[o]]}s[r[r.length-1]]=n}else{i.fieldMap[n.field.toLowerCase()]=n}}if(n.displayName){i.fieldMap[n.displayName.toLowerCase().replace(/\s+/g,"")]=n}}})}e.$watch(function(){return n.config.filterOptions.filterText},function(t){e.filterText=t});e.$watch("filterText",function(t){if(!i.extFilter){e.$emit("ngGridEventFilter",t);c(t);i.evalFilter()}})};var O=function(e,t,n){var r=this;r.multi=e.config.multiSelect;r.selectedItems=e.config.selectedItems;r.selectedIndex=e.config.selectedIndex;r.lastClickedRow=undefined;r.ignoreSelectedItemChanges=false;r.pKeyParser=n(e.config.primaryKey);r.ChangeSelection=function(n,i){var s=i.which||i.keyCode;var o=s===40||s===38;if(i&&i.shiftKey&&!i.keyCode&&r.multi&&e.config.enableRowSelection){if(r.lastClickedRow){var u;if(t.configGroups.length>0){u=e.rowFactory.parsedData.filter(function(e){return!e.isAggRow})}else{u=e.filteredRows}var a=n.rowIndex;var f=r.lastClickedRowIndex;if(a===f){return false}if(a<f){a=a^f;f=a^f;a=a^f;a--}else{f++}var l=[];for(;f<=a;f++){l.push(u[f])}if(l[l.length-1].beforeSelectionChange(l,i)){for(var c=0;c<l.length;c++){var h=l[c];var p=h.selected;h.selected=!p;if(h.clone){h.clone.selected=h.selected}var d=r.selectedItems.indexOf(h.entity);if(d===-1){r.selectedItems.push(h.entity)}else{r.selectedItems.splice(d,1)}}l[l.length-1].afterSelectionChange(l,i)}r.lastClickedRow=n;r.lastClickedRowIndex=n.rowIndex;return true}}else if(!r.multi){if(r.lastClickedRow===n){r.setSelection(r.lastClickedRow,e.config.keepLastSelected?true:!n.selected)}else{if(r.lastClickedRow){r.setSelection(r.lastClickedRow,false)}r.setSelection(n,!n.selected)}}else if(!i.keyCode||o&&!e.config.selectWithCheckboxOnly){r.setSelection(n,!n.selected)}r.lastClickedRow=n;r.lastClickedRowIndex=n.rowIndex;return true};r.getSelection=function(t){var n=false;if(e.config.primaryKey){var i=r.pKeyParser(t);angular.forEach(r.selectedItems,function(e){if(i===r.pKeyParser(e)){n=true}})}else{n=r.selectedItems.indexOf(t)!==-1}return n};r.setSelection=function(t,n){if(e.config.enableRowSelection){if(!n){var i=r.selectedItems.indexOf(t.entity);if(i!==-1){r.selectedItems.splice(i,1)}}else{if(r.selectedItems.indexOf(t.entity)===-1){if(!r.multi&&r.selectedItems.length>0){r.toggleSelectAll(false,true)}r.selectedItems.push(t.entity)}}t.selected=n;if(t.orig){t.orig.selected=n}if(t.clone){t.clone.selected=n}t.afterSelectionChange(t)}};r.toggleSelectAll=function(t,n,i){var s=i?e.filteredRows:e.rowCache;if(n||e.config.beforeSelectionChange(s,t)){var o=r.selectedItems.length;if(o>0){r.selectedItems.length=0}for(var u=0;u<s.length;u++){s[u].selected=t;if(s[u].clone){s[u].clone.selected=t}if(t){r.selectedItems.push(s[u].entity)}}if(!n){e.config.afterSelectionChange(s,t)}}}};var M=function(e,t){e.headerCellStyle=function(e){return{height:e.headerRowHeight+"px"}};e.rowStyle=function(t){var n={top:t.offsetTop+"px",height:e.rowHeight+"px"};if(t.isAggRow){n.left=t.offsetLeft}return n};e.canvasStyle=function(){return{height:t.maxCanvasHt+"px"}};e.headerScrollerStyle=function(){return{height:t.config.headerRowHeight+"px"}};e.topPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.topPanelHeight()+"px"}};e.headerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:t.config.headerRowHeight+"px"}};e.groupPanelStyle=function(){return{width:t.rootDim.outerWidth+"px",height:"32px"}};e.viewportStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.viewportDimHeight()+"px"}};e.footerStyle=function(){return{width:t.rootDim.outerWidth+"px",height:e.footerRowHeight+"px"}}};m.directive("ngCellHasFocus",["$domUtilityService",function(e){var t=function(t,n){t.isFocused=true;e.digest(t);t.$broadcast("ngGridEventStartCellEdit");t.$on("ngGridEventEndCellEdit",function(){t.isFocused=false;e.digest(t)})};return function(e,n){var r=false;var i=false;e.editCell=function(){if(!e.enableCellEditOnFocus){setTimeout(function(){t(e,n)},0)}};n.bind("mousedown",function(t){if(e.enableCellEditOnFocus){i=true}else{n.focus()}return true});n.bind("click",function(r){if(e.enableCellEditOnFocus){r.preventDefault();i=false;t(e,n)}});n.bind("focus",function(s){r=true;if(e.enableCellEditOnFocus&&!i){t(e,n)}return true});n.bind("blur",function(){r=false;return true});n.bind("keydown",function(i){if(!e.enableCellEditOnFocus){if(r&&i.keyCode!==37&&i.keyCode!==38&&i.keyCode!==39&&i.keyCode!==40&&i.keyCode!==9&&!i.shiftKey&&i.keyCode!==13){t(e,n)}if(r&&i.shiftKey&&i.keyCode>=65&&i.keyCode<=90){t(e,n)}if(i.keyCode===27){n.focus()}}return true})}}]);m.directive("ngCellText",function(){return function(e,t){t.bind("mouseover",function(e){e.preventDefault();t.css({cursor:"text"})});t.bind("mouseleave",function(e){e.preventDefault();t.css({cursor:"default"})})}});m.directive("ngCell",["$compile","$domUtilityService",function(e,t){var n={scope:false,compile:function(){return{pre:function(t,n){var r;var i=t.col.cellTemplate.replace(c,"row.entity."+t.col.field);if(t.col.enableCellEdit){r=t.col.cellEditTemplate;r=r.replace(h,i);r=r.replace(p,t.col.editableCellTemplate.replace(c,"row.entity."+t.col.field))}else{r=i}var s=e(r)(t);if(t.enableCellSelection&&s[0].className.indexOf("ngSelectionCell")===-1){s[0].setAttribute("tabindex",0);s.addClass("ngCellElement")}n.append(s)},post:function(e,n){if(e.enableCellSelection){e.domAccessProvider.selectionHandlers(e,n)}e.$on("ngGridEventDigestCell",function(){t.digest(e)})}}}};return n}]);m.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1e3,terminal:true,restrict:"A",compile:function(e,t,n){return function(e,t,r){var i;var s;e.$watch(r["ngEditCellIf"],function(r){if(i){i.remove();i=undefined}if(s){s.$destroy();s=undefined}if(r){s=e.$new();n(s,function(e){i=e;t.after(e)})}})}}}}]);m.directive("ngGridFooter",["$compile","$templateCache",function(e,t){var n={scope:false,compile:function(){return{pre:function(n,r){if(r.children().length===0){r.append(e(t.get(n.gridId+"footerTemplate.html"))(n))}}}}};return n}]);m.directive("ngGridMenu",["$compile","$templateCache",function(e,t){var n={scope:false,compile:function(){return{pre:function(n,r){if(r.children().length===0){r.append(e(t.get(n.gridId+"menuTemplate.html"))(n))}}}}};return n}]);m.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(e,n,r,i,s,o,u,a,f,l){var c={scope:true,compile:function(){return{pre:function(c,h,p){var d=t(h);var v=c.$eval(p.ngGrid);v.gridDim=new E({outerHeight:t(d).height(),outerWidth:t(d).width()});var m=new N(c,v,i,s,n,r,o,u,a,f,l);return m.init().then(function(){if(typeof v.columnDefs==="string"){c.$parent.$watch(v.columnDefs,function(e){if(!e){m.refreshDomSizes();m.buildColumns();return}m.lateBoundColumns=false;c.columns=[];m.config.columnDefs=e;m.buildColumns();m.eventProvider.assignEvents();s.RebuildGrid(c,m)},true)}else{m.buildColumns()}if(typeof v.totalServerItems==="string"){c.$parent.$watch(v.totalServerItems,function(e,t){if(!angular.isDefined(e)){c.totalServerItems=0}else{c.totalServerItems=e}})}else{c.totalServerItems=0}if(typeof v.data==="string"){var n=function(e){m.data=t.extend([],e);m.rowFactory.fixRowCache();angular.forEach(m.data,function(e,t){var n=m.rowMap[t]||t;if(m.rowCache[n]){m.rowCache[n].ensureEntity(e)}m.rowMap[n]=t});m.searchProvider.evalFilter();m.configureColumnWidths();m.refreshDomSizes();if(m.config.sortInfo.fields.length>0){m.sortColumnsInit();c.$emit("ngGridEventSorted",m.config.sortInfo)}c.$emit("ngGridEventData",m.gridId)};c.$parent.$watch(v.data,n);c.$parent.$watch(v.data+".length",function(){n(c.$eval(v.data))})}m.footerController=new T(c,m);h.addClass("ngGrid").addClass(m.gridId.toString());if(!v.enableHighlighting){h.addClass("unselectable")}if(v.jqueryUITheme){h.addClass("ui-widget")}h.append(e(r.get("gridTemplate.html"))(c));s.AssignGridContainers(c,h,m);m.eventProvider=new x(m,c,s,u);v.selectRow=function(e,t){if(m.rowCache[e]){if(m.rowCache[e].clone){m.rowCache[e].clone.setSelection(t?true:false)}m.rowCache[e].setSelection(t?true:false)}};v.selectItem=function(e,t){v.selectRow(m.rowMap[e],t)};v.selectAll=function(e){c.toggleSelectAll(e)};v.selectVisible=function(e){c.toggleSelectAll(e,true)};v.groupBy=function(e){if(e){c.groupBy(c.columns.filter(function(t){return t.field===e})[0])}else{var n=t.extend(true,[],c.configGroups);angular.forEach(n,c.groupBy)}};v.sortBy=function(e){var t=c.columns.filter(function(t){return t.field===e})[0];if(t){t.sort()}};v.gridId=m.gridId;v.ngGrid=m;v.$gridScope=c;v.$gridServices={SortService:i,DomUtilityService:s,UtilityService:o};c.$on("ngGridEventDigestGrid",function(){s.digest(c.$parent)});c.$on("ngGridEventDigestGridParent",function(){s.digest(c.$parent)});c.$evalAsync(function(){c.adjustScrollLeft(0)});angular.forEach(v.plugins,function(e){if(typeof e==="function"){e=new e}e.init(c.$new(),m,v.$gridServices);v.plugins[o.getInstanceType(e)]=e});if(typeof v.init==="function"){v.init(m,c)}return null})}}}};return c}]);m.directive("ngHeaderCell",["$compile",function(e){var t={scope:false,compile:function(){return{pre:function(t,n){n.append(e(t.col.headerCellTemplate)(t))}}}};return t}]);m.directive("ngInput",[function(){return{require:"ngModel",link:function(e,t,n,r){var i;var s=e.$watch("ngModel",function(){i=r.$modelValue;s()});t.bind("keydown",function(n){switch(n.keyCode){case 37:case 38:case 39:case 40:n.stopPropagation();break;case 27:if(!e.$$phase){e.$apply(function(){r.$setViewValue(i);t.blur()})}break;case 13:if(e.enableCellEditOnFocus&&e.totalFilteredItemsLength()-1>e.row.rowIndex&&e.row.rowIndex>0||e.enableCellEdit){t.blur()}break}return true});t.bind("click",function(e){e.stopPropagation()});t.bind("mousedown",function(e){e.stopPropagation()});e.$on("ngGridEventStartCellEdit",function(){t.focus();t.select()});angular.element(t).bind("blur",function(){e.$emit("ngGridEventEndCellEdit")})}}}]);m.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(e,t,n){var r={scope:false,compile:function(){return{pre:function(r,i){r.row.elm=i;if(r.row.clone){r.row.clone.elm=i}if(r.row.isAggRow){var s=n.get(r.gridId+"aggregateTemplate.html");if(r.row.aggLabelFilter){s=s.replace(l,"| "+r.row.aggLabelFilter)}else{s=s.replace(l,"")}i.append(e(s)(r))}else{i.append(e(n.get(r.gridId+"rowTemplate.html"))(r))}r.$on("ngGridEventDigestRow",function(){t.digest(r)})}}}};return r}]);m.directive("ngViewport",[function(){return function(e,t){var n;var r;var i=0;t.bind("scroll",function(t){var s=t.target.scrollLeft,o=t.target.scrollTop;if(e.$headerContainer){e.$headerContainer.scrollLeft(s)}e.adjustScrollLeft(s);e.adjustScrollTop(o);if(!e.$root.$$phase){e.$digest()}r=s;i=o;n=false;return true});t.bind("mousewheel DOMMouseScroll",function(){n=true;if(t.focus){t.focus()}return true});if(!e.enableCellSelection){e.domAccessProvider.selectionHandlers(e,t)}}}]);e.ngGrid.i18n["da"]={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil.",ngSearchPlaceHolder:"Søg...",ngMenuText:"Vælg kolonner:",ngShowingItemsLabel:"Viste rækker:",ngTotalItemsLabel:"Rækker totalt:",ngSelectedItemsLabel:"Valgte rækker:",ngPageSizeLabel:"Side størrelse:",ngPagerFirstTitle:"Første side",ngPagerNextTitle:"Næste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"};e.ngGrid.i18n["de"]={ngAggregateLabel:"artikel",ngGroupPanelDescription:"Ziehen Sie eine Spaltenüberschrift hier und legen Sie es der Gruppe nach dieser Spalte.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswählen:",ngShowingItemsLabel:"Zeige Artikel:",ngTotalItemsLabel:"Meiste Artikel:",ngSelectedItemsLabel:"Ausgewählte Artikel:",ngPageSizeLabel:"Größe Seite:",ngPagerFirstTitle:"Erste Page",ngPagerNextTitle:"Nächste Page",ngPagerPrevTitle:"Vorherige Page",ngPagerLastTitle:"Letzte Page"};e.ngGrid.i18n["en"]={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"};e.ngGrid.i18n["es"]={ngAggregateLabel:"Artículos",ngGroupPanelDescription:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artículos Mostrando:",ngTotalItemsLabel:"Artículos Totales:",ngSelectedItemsLabel:"Artículos Seleccionados:",ngPageSizeLabel:"Tamaño de Página:",ngPagerFirstTitle:"Primera Página",ngPagerNextTitle:"Página Siguiente",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};e.ngGrid.i18n["fr"]={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"Éléments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Première page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page précédente",ngPagerLastTitle:"Dernière page"};e.ngGrid.i18n["pt-br"]={ngAggregateLabel:"items",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Items:",ngTotalItemsLabel:"Total de Items:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Página:",ngPagerFirstTitle:"Primeira Página",ngPagerNextTitle:"Próxima Página",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"};e.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"条目",ngGroupPanelDescription:"拖曳表头到此处以进行分组",ngSearchPlaceHolder:"搜索...",ngMenuText:"数据分组与选择列：",ngShowingItemsLabel:"当前显示条目：",ngTotalItemsLabel:"条目总数：",ngSelectedItemsLabel:"选中条目：",ngPageSizeLabel:"每页显示数：",ngPagerFirstTitle:"回到首页",ngPagerNextTitle:"下一页",ngPagerPrevTitle:"上一页",ngPagerLastTitle:"前往尾页"};e.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"筆",ngGroupPanelDescription:"拖拉表頭到此處以進行分組",ngSearchPlaceHolder:"搜尋...",ngMenuText:"選擇欄位：",ngShowingItemsLabel:"目前顯示筆數：",ngTotalItemsLabel:"總筆數：",ngSelectedItemsLabel:"選取筆數：",ngPageSizeLabel:"每頁顯示：",ngPagerFirstTitle:"第一頁",ngPagerNextTitle:"下一頁",ngPagerPrevTitle:"上一頁",ngPagerLastTitle:"最後頁"};angular.module("ngGrid").run(["$templateCache",function(e){e.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">'+'    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>'+'    <div class="{{row.aggClass()}}"></div>'+"</div>"+"");e.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="editCell()">'+'	<div ng-edit-cell-if="!isFocused">	'+"		DISPLAY_CELL_TEMPLATE"+"	</div>"+'	<div ng-edit-cell-if="isFocused">'+"		EDITABLE_CELL_TEMPLATE"+"	</div>"+"</div>");e.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>');e.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>');e.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected, true)"/>');e.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />');e.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">'+'    <div class="ngTotalSelectContainer" >'+'        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >'+'            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>'+"        </div>"+'        <div class="ngFooterSelectedItems" ng-show="multiSelect">'+'            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>'+"        </div>"+"    </div>"+'    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">'+'        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">'+'            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>'+'            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >'+'                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>'+"            </select>"+"        </div>"+'        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">'+'            <button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>'+'            <button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>'+'            <input class="ngPagerCurrent" min="1" max="{{maxPages()}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>'+'            <button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>'+'            <button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>'+"        </div>"+"    </div>"+"</div>");e.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">'+'    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">'+'        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>'+'        <ul ng-show="configGroups.length > 0" class="ngGroupList">'+'            <li class="ngGroupItem" ng-repeat="group in configGroups">'+'                <span class="ngGroupElement">'+'                    <span class="ngGroupName">{{group.displayName}}'+'                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>'+"                    </span>"+'                    <span ng-hide="$last" class="ngGroupArrow"></span>'+"                </span>"+"            </li>"+"        </ul>"+"    </div>"+'    <div class="ngHeaderContainer" ng-style="headerStyle()">'+'        <div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-include="gridId + \'headerRowTemplate.html\'"></div>'+"    </div>"+"    <div ng-grid-menu></div>"+"</div>"+'<div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">'+'    <div class="ngCanvas" ng-style="canvasStyle()">'+'        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>'+"    </div>"+"</div>"+"<div ng-grid-footer></div>"+"");e.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">'+'    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>'+'    <div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div>'+'    <div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div>'+'    <div class="ngSortPriority">{{col.sortPriority}}</div>'+'    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>'+"</div>"+'<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>');e.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">'+'	<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }"> </div>'+"	<div ng-header-cell></div>"+"</div>");e.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">'+'    <div class="ngHeaderButtonArrow"></div>'+"</div>"+'<div ng-show="showMenu" class="ngColMenu">'+'    <div ng-show="showFilter">'+'        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>'+"    </div>"+'    <div ng-show="showColumnMenu">'+'        <span class="ngMenuText">{{i18n.ngMenuText}}</span>'+'        <ul class="ngColList">'+'            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">'+'                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>'+'				<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>'+'				<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>          '+"            </li>"+"        </ul>"+"    </div>"+"</div>");e.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">'+'	<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }"> </div>'+"	<div ng-cell></div>"+"</div>")}])})(window,jQuery)